// ============================================================================
// Prisma Schema - Intelligence Mesh v1.7.0
// Phase 3: Wellbeing & Parent Portal
// Phase 4: Governance, Token Economy, Developer Marketplace, Virtual Immersion
// ============================================================================

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================================================
// WELLBEING MODULE (Phase 3)
// ============================================================================

model StudentWellbeingProfile {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  createdBy             String   @map("created_by")
  updatedBy             String   @map("updated_by")
  
  studentId             String   @unique @map("student_id")
  studentName           String   @map("student_name")
  currentYearLevel      String   @map("current_year_level")
  classGroups           String[] @map("class_groups")
  
  // Current state (JSON for flexibility)
  currentState          Json     @map("current_state")
  // { overallRiskLevel, riskScore, lastAssessedAt, domainScores[], activeSignals[], trend, trendDuration }
  
  aiSynthesis           Json     @map("ai_synthesis")
  // { summary, primaryConcerns[], protectiveFactors[], recommendedActions[], confidenceLevel, synthesisModel, synthesisTimestamp }
  
  interventionState     Json     @map("intervention_state")
  // { status, currentInterventions[], historicalInterventions, lastInterventionDate, primaryCaseOwner }
  
  notificationSettings  Json     @map("notification_settings")
  // { primaryContacts[], escalationChain[], parentNotificationEnabled, sensitiveDataRestriction }
  
  historySummary        Json     @map("history_summary")
  // { totalCheckIns, averageMoodScore, totalInterventions, significantEvents, profileCreatedAt, longestStableStreak }
  
  // Relations
  signals               WellbeingSignal[]
  checkIns              WellbeingCheckIn[]
  interventions         WellbeingIntervention[]
  incidents             WellbeingIncident[]
  
  @@index([tenantId, studentId])
  @@index([tenantId, currentYearLevel])
  @@map("student_wellbeing_profiles")
}

model WellbeingSignal {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  createdBy             String   @map("created_by")
  updatedBy             String   @map("updated_by")
  
  studentId             String   @map("student_id")
  profileId             String   @map("profile_id")
  
  source                SignalSource
  sourceEventId         String?  @map("source_event_id")
  domain                WellbeingDomain
  signalType            String   @map("signal_type")
  description           String   @db.Text
  rawData               Json     @map("raw_data")
  
  severity              SignalSeverity
  strength              SignalStrength
  riskContribution      Float    @map("risk_contribution")
  
  aiInterpretation      Json?    @map("ai_interpretation")
  // { analysis, relatedSignals[], suggestedAction, confidence }
  
  status                SignalStatus @default(ACTIVE)
  expiresAt             DateTime? @map("expires_at")
  acknowledgedAt        DateTime? @map("acknowledged_at")
  acknowledgedBy        String?   @map("acknowledged_by")
  dismissalReason       String?   @map("dismissal_reason")
  
  // Relations
  profile               StudentWellbeingProfile @relation(fields: [profileId], references: [id])
  
  @@index([tenantId, studentId])
  @@index([tenantId, status])
  @@index([tenantId, source])
  @@index([tenantId, domain])
  @@map("wellbeing_signals")
}

model WellbeingCheckIn {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  createdBy             String   @map("created_by")
  updatedBy             String   @map("updated_by")
  
  studentId             String   @map("student_id")
  profileId             String   @map("profile_id")
  studentName           String   @map("student_name")
  
  type                  CheckInType
  triggeredBy           String?  @map("triggered_by")
  templateId            String?  @map("template_id")
  scheduledFor          DateTime? @map("scheduled_for")
  completedAt           DateTime? @map("completed_at")
  
  responses             Json     // CheckInResponse[]
  overallMoodScore      Int?     @map("overall_mood_score")
  
  aiAnalysis            Json?    @map("ai_analysis")
  // { sentimentScore, concernIndicators[], positiveIndicators[], recommendedFollowUp, keyThemes[], riskFlags[] }
  
  requiresFollowUp      Boolean  @default(false) @map("requires_follow_up")
  followUpAssignedTo    String?  @map("follow_up_assigned_to")
  followUpCompletedAt   DateTime? @map("follow_up_completed_at")
  followUpNotes         String?  @map("follow_up_notes") @db.Text
  
  visibleToParent       Boolean  @default(true) @map("visible_to_parent")
  staffVisibility       String   @default("all") @map("staff_visibility")
  
  // Relations
  profile               StudentWellbeingProfile @relation(fields: [profileId], references: [id])
  template              CheckInTemplate?        @relation(fields: [templateId], references: [id])
  
  @@index([tenantId, studentId])
  @@index([tenantId, type])
  @@index([tenantId, requiresFollowUp])
  @@map("wellbeing_check_ins")
}

model CheckInTemplate {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  createdBy             String   @map("created_by")
  updatedBy             String   @map("updated_by")
  
  schoolId              String   @map("school_id")
  name                  String
  description           String   @db.Text
  type                  CheckInType
  
  targetYearLevels      String[] @map("target_year_levels")
  targetClassGroups     String[] @map("target_class_groups")
  
  questions             Json     // CheckInQuestion[]
  estimatedDuration     Int      @map("estimated_duration")
  
  schedule              Json?    // { frequency, preferredDay, preferredTime, windowDuration }
  aiConfig              Json     @map("ai_config")
  // { analyseResponses, sentimentAnalysis, autoFlagConcerns, concernThreshold, compareToBaseline }
  
  status                TemplateStatus @default(DRAFT)
  
  // Relations
  checkIns              WellbeingCheckIn[]
  
  @@index([tenantId, schoolId])
  @@index([tenantId, status])
  @@map("check_in_templates")
}

model WellbeingIntervention {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  createdBy             String   @map("created_by")
  updatedBy             String   @map("updated_by")
  
  studentId             String   @map("student_id")
  profileId             String   @map("profile_id")
  studentName           String   @map("student_name")
  
  type                  InterventionType
  tier                  Int      // 1, 2, or 3
  title                 String
  description           String   @db.Text
  rationale             String   @db.Text
  
  triggeredBy           String   @map("triggered_by")
  triggeringSignals     String[] @map("triggering_signals")
  triggeringRiskLevel   RiskLevel @map("triggering_risk_level")
  
  status                InterventionStatus @default(RECOMMENDED)
  priority              InterventionPriority @default(ROUTINE)
  
  plannedStartDate      DateTime? @map("planned_start_date")
  plannedEndDate        DateTime? @map("planned_end_date")
  actualStartDate       DateTime? @map("actual_start_date")
  actualEndDate         DateTime? @map("actual_end_date")
  
  approvedBy            String?  @map("approved_by")
  approvedAt            DateTime? @map("approved_at")
  primaryOwner          String   @map("primary_owner")
  supportingStaff       String[] @map("supporting_staff")
  
  goals                 Json     // InterventionGoal[]
  successCriteria       String[] @map("success_criteria")
  measurementMethod     String   @map("measurement_method")
  activities            Json     // InterventionActivity[]
  outcome               Json?    // { status, summary, goalsAchieved[], goalsNotAchieved[], lessonsLearned, recommendNextSteps[] }
  
  confidentiality       ConfidentialityLevel @default(STANDARD)
  parentNotified        Boolean  @default(false) @map("parent_notified")
  parentConsentRequired Boolean  @default(false) @map("parent_consent_required")
  parentConsentReceived Boolean? @map("parent_consent_received")
  
  aiLearningData        Json?    @map("ai_learning_data")
  // { predictedEffectiveness, actualEffectiveness, factorsContributing[], modelFeedbackSubmitted }
  
  // Relations
  profile               StudentWellbeingProfile @relation(fields: [profileId], references: [id])
  
  @@index([tenantId, studentId])
  @@index([tenantId, status])
  @@index([tenantId, primaryOwner])
  @@map("wellbeing_interventions")
}

model WellbeingIncident {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  createdBy             String   @map("created_by")
  updatedBy             String   @map("updated_by")
  
  studentId             String   @map("student_id")
  profileId             String   @map("profile_id")
  studentName           String   @map("student_name")
  
  type                  IncidentType
  category              IncidentCategory
  severity              IncidentSeverity
  title                 String
  description           String   @db.Text
  
  occurredAt            DateTime @map("occurred_at")
  reportedAt            DateTime @map("reported_at")
  reportedBy            String   @map("reported_by")
  location              String?
  
  otherStudentsInvolved String[] @map("other_students_involved")
  staffInvolved         String[] @map("staff_involved")
  witnessIds            String[] @map("witness_ids")
  
  immediateResponse     String   @map("immediate_response") @db.Text
  respondedBy           String   @map("responded_by")
  
  parentNotified        Boolean  @default(false) @map("parent_notified")
  parentNotifiedAt      DateTime? @map("parent_notified_at")
  parentNotifiedBy      String?  @map("parent_notified_by")
  
  investigationRequired Boolean  @default(false) @map("investigation_required")
  investigation         Json?    // { status, assignedTo, startedAt, completedAt, findings, recommendations[] }
  
  followUpRequired      Boolean  @default(true) @map("follow_up_required")
  followUpActions       String[] @map("follow_up_actions")
  linkedInterventions   String[] @map("linked_interventions")
  
  externalReportRequired Boolean @default(false) @map("external_report_required")
  externalReportType    String?  @map("external_report_type")
  externalReportSubmitted Boolean? @map("external_report_submitted")
  externalReportRef     String?  @map("external_report_ref")
  
  aiAnalysis            Json?    @map("ai_analysis")
  // { patternMatch, relatedIncidents[], riskAssessment, recommendedActions[] }
  
  confidentiality       ConfidentialityLevel @default(STANDARD)
  accessRestrictions    String[] @map("access_restrictions")
  
  // Relations
  profile               StudentWellbeingProfile @relation(fields: [profileId], references: [id])
  
  @@index([tenantId, studentId])
  @@index([tenantId, type])
  @@index([tenantId, severity])
  @@map("wellbeing_incidents")
}

model WellbeingNotification {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  type                  NotificationType
  priority              NotificationPriority @default(MEDIUM)
  
  studentId             String   @map("student_id")
  studentName           String   @map("student_name")
  
  title                 String
  message               String   @db.Text
  
  recipientType         String   @map("recipient_type") // staff, parent
  recipientId           String   @map("recipient_id")
  recipientEmail        String?  @map("recipient_email")
  
  relatedEntityType     String   @map("related_entity_type")
  relatedEntityId       String   @map("related_entity_id")
  
  actionRequired        Boolean  @default(false) @map("action_required")
  actionUrl             String?  @map("action_url")
  
  sentAt                DateTime? @map("sent_at")
  deliveredAt           DateTime? @map("delivered_at")
  readAt                DateTime? @map("read_at")
  acknowledgedAt        DateTime? @map("acknowledged_at")
  acknowledgedBy        String?   @map("acknowledged_by")
  
  expiresAt             DateTime? @map("expires_at")
  
  @@index([tenantId, recipientId])
  @@index([tenantId, type])
  @@index([tenantId, priority])
  @@map("wellbeing_notifications")
}

// ============================================================================
// PARENT PORTAL MODULE (Phase 3)
// ============================================================================

model ParentGuardian {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  userId                String   @unique @map("user_id")
  firstName             String   @map("first_name")
  lastName              String   @map("last_name")
  email                 String
  phone                 String?
  
  preferredLanguage     String   @default("en") @map("preferred_language")
  preferredChannel      String   @default("email") @map("preferred_channel")
  timezone              String   @default("UTC")
  
  communicationPrefs    Json     @map("communication_prefs")
  // { emailOptIn, smsOptIn, pushNotifications, quietHours, communicationFrequency }
  
  engagementMetrics     Json     @map("engagement_metrics")
  // { lastPortalLogin, loginFrequency, messageResponseTime, resourcesAccessed, engagementScore }
  
  // Relations
  studentLinks          ParentStudentLink[]
  messages              ParentMessage[]       @relation("RecipientMessages")
  sentMessages          ParentMessage[]       @relation("SenderMessages")
  meetings              ParentMeeting[]
  consents              ParentConsent[]
  actionItems           ParentActionItem[]
  
  @@unique([tenantId, email])
  @@index([tenantId])
  @@map("parent_guardians")
}

model ParentStudentLink {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  guardianId            String   @map("guardian_id")
  studentId             String   @map("student_id")
  
  relationship          GuardianRelationship
  isPrimaryContact      Boolean  @default(false) @map("is_primary_contact")
  hasLegalCustody       Boolean  @default(true) @map("has_legal_custody")
  canPickUp             Boolean  @default(true) @map("can_pick_up")
  emergencyContact      Boolean  @default(true) @map("emergency_contact")
  portalAccessLevel     PortalAccessLevel @default(FULL) @map("portal_access_level")
  
  // Relations
  guardian              ParentGuardian @relation(fields: [guardianId], references: [id])
  
  @@unique([guardianId, studentId])
  @@index([tenantId, studentId])
  @@map("parent_student_links")
}

model ParentMessage {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  threadId              String?  @map("thread_id")
  
  senderId              String   @map("sender_id")
  senderType            String   @map("sender_type") // parent, staff, system
  recipientId           String   @map("recipient_id")
  recipientType         String   @map("recipient_type")
  
  studentIds            String[] @map("student_ids") // Which students this relates to
  
  subject               String?
  content               String   @db.Text
  contentType           String   @default("text") @map("content_type")
  
  priority              MessagePriority @default(NORMAL)
  category              MessageCategory @default(GENERAL)
  
  attachments           Json?    // { id, name, url, type }[]
  
  sentAt                DateTime @map("sent_at")
  deliveredAt           DateTime? @map("delivered_at")
  readAt                DateTime? @map("read_at")
  
  aiMetadata            Json?    @map("ai_metadata")
  // { sentiment, suggestedResponses[], urgencyScore, topicClassification }
  
  // Relations
  sender                ParentGuardian? @relation("SenderMessages", fields: [senderId], references: [id])
  recipient             ParentGuardian? @relation("RecipientMessages", fields: [recipientId], references: [id])
  
  @@index([tenantId, threadId])
  @@index([tenantId, recipientId])
  @@index([tenantId, senderId])
  @@map("parent_messages")
}

model ParentMeeting {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  guardianId            String   @map("guardian_id")
  staffId               String   @map("staff_id")
  studentIds            String[] @map("student_ids")
  
  type                  MeetingType
  title                 String
  description           String?  @db.Text
  
  scheduledStart        DateTime @map("scheduled_start")
  scheduledEnd          DateTime @map("scheduled_end")
  timezone              String   @default("UTC")
  
  location              String?  // Physical location or video link
  meetingUrl            String?  @map("meeting_url")
  
  status                MeetingStatus @default(SCHEDULED)
  
  requestedBy           String   @map("requested_by")
  confirmedAt           DateTime? @map("confirmed_at")
  
  attendedByParent      Boolean? @map("attended_by_parent")
  attendedByStaff       Boolean? @map("attended_by_staff")
  
  notes                 String?  @db.Text
  outcomes              String[] @map("outcomes")
  followUpActions       String[] @map("follow_up_actions")
  
  // Relations
  guardian              ParentGuardian @relation(fields: [guardianId], references: [id])
  
  @@index([tenantId, guardianId])
  @@index([tenantId, staffId])
  @@index([tenantId, scheduledStart])
  @@map("parent_meetings")
}

model ParentConsent {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  guardianId            String   @map("guardian_id")
  studentId             String   @map("student_id")
  
  consentType           ConsentType @map("consent_type")
  title                 String
  description           String   @db.Text
  
  requestedAt           DateTime @map("requested_at")
  requestedBy           String   @map("requested_by")
  expiresAt             DateTime? @map("expires_at")
  
  status                ConsentStatus @default(PENDING)
  respondedAt           DateTime? @map("responded_at")
  response              Boolean?
  responseNote          String?  @map("response_note")
  
  // For recurring consents
  validFrom             DateTime? @map("valid_from")
  validUntil            DateTime? @map("valid_until")
  
  // Relations
  guardian              ParentGuardian @relation(fields: [guardianId], references: [id])
  
  @@index([tenantId, guardianId])
  @@index([tenantId, studentId])
  @@index([tenantId, status])
  @@map("parent_consents")
}

model ParentActionItem {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  guardianId            String   @map("guardian_id")
  studentIds            String[] @map("student_ids")
  
  title                 String
  description           String   @db.Text
  category              ActionCategory
  
  priority              ActionPriority @default(MEDIUM)
  dueDate               DateTime? @map("due_date")
  
  status                ActionStatus @default(PENDING)
  completedAt           DateTime? @map("completed_at")
  
  relatedEntityType     String?  @map("related_entity_type")
  relatedEntityId       String?  @map("related_entity_id")
  
  // Relations
  guardian              ParentGuardian @relation(fields: [guardianId], references: [id])
  
  @@index([tenantId, guardianId])
  @@index([tenantId, status])
  @@map("parent_action_items")
}

model ParentEngagementAnalytics {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  generatedAt           DateTime @default(now()) @map("generated_at")
  
  schoolId              String   @map("school_id")
  period                Json     // { start, end }
  cohort                Json     // { type, identifier }
  
  metrics               Json     @map("metrics")
  // { totalGuardians, activeGuardians, avgLoginFrequency, avgResponseTime, avgEngagementScore }
  
  trends                Json     @map("trends")
  // { engagementTrend, communicationTrend, participationTrend }
  
  insights              Json     @map("insights")
  // { atRiskFamilies[], highlyEngaged[], recommendations[] }
  
  @@index([tenantId, schoolId])
  @@map("parent_engagement_analytics")
}

// ============================================================================
// GOVERNANCE MODULE (Phase 4)
// ============================================================================

model DAO {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  name                  String
  description           String   @db.Text
  purpose               String   @db.Text
  
  type                  DAOType
  scope                 DAOScope
  
  status                DAOStatus @default(DRAFT)
  activatedAt           DateTime? @map("activated_at")
  
  // Configuration
  votingConfig          Json     @map("voting_config")
  // { quorumPercentage, passingThreshold, votingPeriodDays, discussionPeriodDays, executionDelay }
  
  membershipConfig      Json     @map("membership_config")
  // { openMembership, requiresApproval, minimumStake, memberCap }
  
  treasuryConfig        Json     @map("treasury_config")
  // { multisigRequired, signaturesRequired, spendingLimits }
  
  // Metadata
  logoUrl               String?  @map("logo_url")
  websiteUrl            String?  @map("website_url")
  socialLinks           Json?    @map("social_links")
  
  // Relations
  members               DAOMember[]
  proposals             DAOProposal[]
  treasury              DAOTreasury?
  policies              DAOPolicy[]
  
  @@unique([tenantId, name])
  @@index([tenantId])
  @@map("daos")
}

model DAOMember {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  daoId                 String   @map("dao_id")
  userId                String   @map("user_id")
  
  role                  DAOMemberRole @default(MEMBER)
  status                MemberStatus @default(ACTIVE)
  
  votingPower           Float    @default(1) @map("voting_power")
  tokensStaked          Float    @default(0) @map("tokens_staked")
  
  joinedAt              DateTime @map("joined_at")
  lastActiveAt          DateTime @map("last_active_at")
  
  delegatedTo           String?  @map("delegated_to")
  delegatedPower        Float    @default(0) @map("delegated_power")
  
  proposalsCreated      Int      @default(0) @map("proposals_created")
  votescast             Int      @default(0) @map("votes_cast")
  participationScore    Float    @default(0) @map("participation_score")
  
  // Relations
  dao                   DAO      @relation(fields: [daoId], references: [id])
  votes                 DAOVote[]
  
  @@unique([daoId, userId])
  @@index([tenantId, daoId])
  @@index([tenantId, userId])
  @@map("dao_members")
}

model DAOProposal {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  daoId                 String   @map("dao_id")
  proposalNumber        Int      @map("proposal_number")
  
  title                 String
  summary               String   @db.Text
  description           String   @db.Text
  
  type                  ProposalType
  category              String
  
  proposerId            String   @map("proposer_id")
  
  status                ProposalStatus @default(DRAFT)
  
  // Timeline
  submittedAt           DateTime? @map("submitted_at")
  discussionStartsAt    DateTime? @map("discussion_starts_at")
  discussionEndsAt      DateTime? @map("discussion_ends_at")
  votingStartsAt        DateTime? @map("voting_starts_at")
  votingEndsAt          DateTime? @map("voting_ends_at")
  executedAt            DateTime? @map("executed_at")
  
  // Voting results
  votesFor              Float    @default(0) @map("votes_for")
  votesAgainst          Float    @default(0) @map("votes_against")
  votesAbstain          Float    @default(0) @map("votes_abstain")
  quorumReached         Boolean  @default(false) @map("quorum_reached")
  
  // Execution
  executionData         Json?    @map("execution_data")
  executionResult       String?  @map("execution_result")
  
  // AI analysis
  aiAnalysis            Json?    @map("ai_analysis")
  // { sentimentScore, impactAssessment, riskAnalysis, recommendations[] }
  
  // Relations
  dao                   DAO      @relation(fields: [daoId], references: [id])
  votes                 DAOVote[]
  
  @@unique([daoId, proposalNumber])
  @@index([tenantId, daoId])
  @@index([tenantId, status])
  @@map("dao_proposals")
}

model DAOVote {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  proposalId            String   @map("proposal_id")
  memberId              String   @map("member_id")
  
  vote                  VoteChoice
  votingPower           Float    @map("voting_power")
  
  reason                String?  @db.Text
  delegatedFrom         String?  @map("delegated_from")
  
  // Relations
  proposal              DAOProposal @relation(fields: [proposalId], references: [id])
  member                DAOMember   @relation(fields: [memberId], references: [id])
  
  @@unique([proposalId, memberId])
  @@index([tenantId, proposalId])
  @@map("dao_votes")
}

model DAOTreasury {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  daoId                 String   @unique @map("dao_id")
  
  balance               Float    @default(0)
  lockedBalance         Float    @default(0) @map("locked_balance")
  
  // Multi-sig configuration
  signatories           String[]
  requiredSignatures    Int      @map("required_signatures")
  
  // Relations
  dao                   DAO      @relation(fields: [daoId], references: [id])
  transactions          TreasuryTransaction[]
  
  @@index([tenantId])
  @@map("dao_treasuries")
}

model TreasuryTransaction {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  treasuryId            String   @map("treasury_id")
  
  type                  TransactionType
  amount                Float
  description           String
  
  proposalId            String?  @map("proposal_id")
  
  status                TransactionStatus @default(PENDING)
  signatures            String[]
  executedAt            DateTime? @map("executed_at")
  executedBy            String?   @map("executed_by")
  
  // Relations
  treasury              DAOTreasury @relation(fields: [treasuryId], references: [id])
  
  @@index([tenantId, treasuryId])
  @@map("treasury_transactions")
}

model DAOPolicy {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  daoId                 String   @map("dao_id")
  
  name                  String
  description           String   @db.Text
  category              String
  
  rules                 Json     // Policy rules and conditions
  enforcement           Json     // How the policy is enforced
  
  status                PolicyStatus @default(DRAFT)
  effectiveFrom         DateTime? @map("effective_from")
  effectiveUntil        DateTime? @map("effective_until")
  
  createdByProposal     String?  @map("created_by_proposal")
  
  // Relations
  dao                   DAO      @relation(fields: [daoId], references: [id])
  
  @@index([tenantId, daoId])
  @@map("dao_policies")
}

// ============================================================================
// TOKEN ECONOMY MODULE (Phase 4)
// ============================================================================

model TokenAccount {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  userId                String   @unique @map("user_id")
  
  balance               Float    @default(0)
  lockedBalance         Float    @default(0) @map("locked_balance")
  stakedBalance         Float    @default(0) @map("staked_balance")
  
  lifetimeEarned        Float    @default(0) @map("lifetime_earned")
  lifetimeSpent         Float    @default(0) @map("lifetime_spent")
  
  level                 Int      @default(1)
  experiencePoints      Int      @default(0) @map("experience_points")
  
  // Relations
  transactions          TokenTransaction[]
  stakes                TokenStake[]
  achievements          UserAchievement[]
  nfts                  TokenNFT[]
  
  @@index([tenantId])
  @@map("token_accounts")
}

model TokenTransaction {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  accountId             String   @map("account_id")
  
  type                  TokenTransactionType
  amount                Float
  
  fromAccountId         String?  @map("from_account_id")
  toAccountId           String?  @map("to_account_id")
  
  reason                String
  category              String
  
  relatedEntityType     String?  @map("related_entity_type")
  relatedEntityId       String?  @map("related_entity_id")
  
  metadata              Json?
  
  // Relations
  account               TokenAccount @relation(fields: [accountId], references: [id])
  
  @@index([tenantId, accountId])
  @@index([tenantId, type])
  @@map("token_transactions")
}

model TokenStake {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  accountId             String   @map("account_id")
  
  amount                Float
  lockPeriodDays        Int      @map("lock_period_days")
  
  startedAt             DateTime @map("started_at")
  unlocksAt             DateTime @map("unlocks_at")
  
  apy                   Float    // Annual percentage yield
  rewardsEarned         Float    @default(0) @map("rewards_earned")
  rewardsClaimed        Float    @default(0) @map("rewards_claimed")
  
  status                StakeStatus @default(ACTIVE)
  withdrawnAt           DateTime? @map("withdrawn_at")
  
  // For DAO staking
  daoId                 String?  @map("dao_id")
  
  // Relations
  account               TokenAccount @relation(fields: [accountId], references: [id])
  
  @@index([tenantId, accountId])
  @@index([tenantId, status])
  @@map("token_stakes")
}

model TokenNFT {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  tokenId               String   @unique @map("token_id")
  ownerId               String   @map("owner_id")
  
  type                  NFTType
  name                  String
  description           String   @db.Text
  
  imageUrl              String   @map("image_url")
  metadataUrl           String   @map("metadata_url")
  
  attributes            Json     // NFT attributes
  
  // For credentials
  issuerId              String?  @map("issuer_id")
  issuedTo              String?  @map("issued_to")
  validUntil            DateTime? @map("valid_until")
  revoked               Boolean  @default(false)
  
  // Marketplace
  isListed              Boolean  @default(false) @map("is_listed")
  listingPrice          Float?   @map("listing_price")
  
  // Relations
  owner                 TokenAccount @relation(fields: [ownerId], references: [id])
  
  @@index([tenantId, ownerId])
  @@index([tenantId, type])
  @@map("token_nfts")
}

model Achievement {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  code                  String   @unique
  name                  String
  description           String   @db.Text
  
  category              String
  tier                  AchievementTier @default(BRONZE)
  
  criteria              Json     // Conditions to unlock
  reward                Json     // { tokens, xp, nft? }
  
  iconUrl               String   @map("icon_url")
  
  isActive              Boolean  @default(true) @map("is_active")
  
  // Relations
  userAchievements      UserAchievement[]
  
  @@index([tenantId])
  @@map("achievements")
}

model UserAchievement {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  accountId             String   @map("account_id")
  achievementId         String   @map("achievement_id")
  
  unlockedAt            DateTime @map("unlocked_at")
  rewardClaimed         Boolean  @default(false) @map("reward_claimed")
  claimedAt             DateTime? @map("claimed_at")
  
  progress              Json?    // For progressive achievements
  
  // Relations
  account               TokenAccount @relation(fields: [accountId], references: [id])
  achievement           Achievement  @relation(fields: [achievementId], references: [id])
  
  @@unique([accountId, achievementId])
  @@index([tenantId, accountId])
  @@map("user_achievements")
}

// ============================================================================
// DEVELOPER MARKETPLACE MODULE (Phase 4)
// ============================================================================

model MarketplaceApp {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  developerId           String   @map("developer_id")
  
  name                  String
  slug                  String   @unique
  tagline               String
  description           String   @db.Text
  
  category              AppCategory
  tags                  String[]
  
  version               String
  changelog             Json     // Version history
  
  iconUrl               String   @map("icon_url")
  screenshots           String[]
  videoUrl              String?  @map("video_url")
  
  status                AppStatus @default(DRAFT)
  publishedAt           DateTime? @map("published_at")
  
  // Pricing
  pricingModel          PricingModel @map("pricing_model")
  price                 Float?
  trialDays             Int?     @map("trial_days")
  
  // Stats
  installCount          Int      @default(0) @map("install_count")
  activeInstalls        Int      @default(0) @map("active_installs")
  averageRating         Float?   @map("average_rating")
  reviewCount           Int      @default(0) @map("review_count")
  
  // Technical
  permissions           String[] // Required permissions
  webhookUrl            String?  @map("webhook_url")
  oauthConfig           Json?    @map("oauth_config")
  
  // Security
  securityScanStatus    String?  @map("security_scan_status")
  lastSecurityScan      DateTime? @map("last_security_scan")
  
  // Relations
  developer             MarketplaceDeveloper @relation(fields: [developerId], references: [id])
  installations         AppInstallation[]
  reviews               AppReview[]
  
  @@unique([tenantId, slug])
  @@index([tenantId, developerId])
  @@index([tenantId, status])
  @@index([tenantId, category])
  @@map("marketplace_apps")
}

model MarketplaceDeveloper {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  userId                String   @unique @map("user_id")
  
  name                  String
  companyName           String?  @map("company_name")
  email                 String
  website               String?
  
  verified              Boolean  @default(false)
  verifiedAt            DateTime? @map("verified_at")
  
  // Payout info
  payoutMethod          String?  @map("payout_method")
  payoutDetails         Json?    @map("payout_details")
  
  // Stats
  totalEarnings         Float    @default(0) @map("total_earnings")
  totalPayouts          Float    @default(0) @map("total_payouts")
  pendingPayout         Float    @default(0) @map("pending_payout")
  
  // Relations
  apps                  MarketplaceApp[]
  apiKeys               DeveloperAPIKey[]
  
  @@index([tenantId])
  @@map("marketplace_developers")
}

model AppInstallation {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  appId                 String   @map("app_id")
  installedBy           String   @map("installed_by")
  
  schoolId              String?  @map("school_id") // For school-level installs
  
  status                InstallStatus @default(ACTIVE)
  installedAt           DateTime @map("installed_at")
  lastUsedAt            DateTime? @map("last_used_at")
  
  configuration         Json?    // App-specific config
  
  // Relations
  app                   MarketplaceApp @relation(fields: [appId], references: [id])
  
  @@unique([appId, tenantId, schoolId])
  @@index([tenantId])
  @@map("app_installations")
}

model AppReview {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  appId                 String   @map("app_id")
  reviewerId            String   @map("reviewer_id")
  
  rating                Int      // 1-5
  title                 String?
  content               String   @db.Text
  
  status                ReviewStatus @default(PUBLISHED)
  
  developerResponse     String?  @map("developer_response") @db.Text
  developerRespondedAt  DateTime? @map("developer_responded_at")
  
  helpfulCount          Int      @default(0) @map("helpful_count")
  
  // Relations
  app                   MarketplaceApp @relation(fields: [appId], references: [id])
  
  @@unique([appId, reviewerId])
  @@index([tenantId, appId])
  @@map("app_reviews")
}

model DeveloperAPIKey {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  
  developerId           String   @map("developer_id")
  
  name                  String
  keyHash               String   @unique @map("key_hash")
  keyPrefix             String   @map("key_prefix") // First 8 chars for display
  
  permissions           String[]
  rateLimit             Int      @default(1000) @map("rate_limit")
  
  status                APIKeyStatus @default(ACTIVE)
  lastUsedAt            DateTime? @map("last_used_at")
  expiresAt             DateTime? @map("expires_at")
  revokedAt             DateTime? @map("revoked_at")
  
  // Relations
  developer             MarketplaceDeveloper @relation(fields: [developerId], references: [id])
  
  @@index([tenantId, developerId])
  @@map("developer_api_keys")
}

model Bounty {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  title                 String
  description           String   @db.Text
  requirements          String   @db.Text
  
  category              String
  tags                  String[]
  
  createdBy             String   @map("created_by")
  
  reward                Float
  funded                Float    @default(0)
  
  status                BountyStatus @default(OPEN)
  deadline              DateTime?
  
  claimedBy             String?  @map("claimed_by")
  claimedAt             DateTime? @map("claimed_at")
  
  completedAt           DateTime? @map("completed_at")
  completionProof       String?  @map("completion_proof") @db.Text
  
  // For disputes
  disputed              Boolean  @default(false)
  disputeReason         String?  @map("dispute_reason")
  disputeResolution     String?  @map("dispute_resolution")
  
  @@index([tenantId, status])
  @@map("bounties")
}

// ============================================================================
// VIRTUAL IMMERSION MODULE (Phase 4)
// ============================================================================

model ImmersionEnvironment {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  name                  String
  description           String   @db.Text
  
  language              String   // Target language
  cefrLevel             String   @map("cefr_level") // A1, A2, B1, B2, C1, C2
  
  type                  EnvironmentType
  category              String   // cafe, airport, market, etc.
  
  // 3D assets
  sceneUrl              String   @map("scene_url")
  thumbnailUrl          String   @map("thumbnail_url")
  previewUrl            String?  @map("preview_url")
  
  // Configuration
  config                Json     // Environment-specific settings
  interactables         Json     // Interactive objects
  spawnPoints           Json     @map("spawn_points")
  
  // AI NPCs
  npcCharacters         Json     @map("npc_characters")
  // { id, name, role, personality, dialogueTree, voiceId }[]
  
  // Learning content
  vocabularyFocus       String[] @map("vocabulary_focus")
  grammarFocus          String[] @map("grammar_focus")
  scenarios             Json     // Learning scenarios
  
  // Platform support
  supports2D            Boolean  @default(true) @map("supports_2d")
  supports3D            Boolean  @default(true) @map("supports_3d")
  supportsAR            Boolean  @default(false) @map("supports_ar")
  supportsVR            Boolean  @default(false) @map("supports_vr")
  supportsWebXR         Boolean  @default(false) @map("supports_webxr")
  
  status                EnvironmentStatus @default(DRAFT)
  publishedAt           DateTime? @map("published_at")
  
  // Relations
  sessions              ImmersionSession[]
  
  @@index([tenantId, language])
  @@index([tenantId, cefrLevel])
  @@map("immersion_environments")
}

model ImmersionSession {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  environmentId         String   @map("environment_id")
  userId                String   @map("user_id")
  
  type                  SessionType
  platform              PlatformType
  
  startedAt             DateTime @map("started_at")
  endedAt               DateTime? @map("ended_at")
  duration              Int?     // seconds
  
  // Learning progress
  vocabularyPracticed   String[] @map("vocabulary_practiced")
  grammarPracticed      String[] @map("grammar_practiced")
  scenariosAttempted    String[] @map("scenarios_attempted")
  scenariosCompleted    String[] @map("scenarios_completed")
  
  // Assessment
  pronunciationScores   Json?    @map("pronunciation_scores")
  // { word, score, feedback }[]
  
  conversationLog       Json?    @map("conversation_log")
  // { timestamp, speaker, text, analysis }[]
  
  overallScore          Float?   @map("overall_score")
  feedback              Json?    // AI-generated feedback
  
  // Technical
  performanceMetrics    Json?    @map("performance_metrics")
  // { avgFrameRate, latency, connectionQuality }
  
  // Relations
  environment           ImmersionEnvironment @relation(fields: [environmentId], references: [id])
  
  @@index([tenantId, userId])
  @@index([tenantId, environmentId])
  @@map("immersion_sessions")
}

model ImmersionProgress {
  id                    String   @id @default(cuid())
  tenantId              String   @map("tenant_id")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")
  
  userId                String   @map("user_id")
  language              String
  
  cefrLevel             String   @map("cefr_level")
  experiencePoints      Int      @default(0) @map("experience_points")
  
  // Skills
  listeningScore        Float    @default(0) @map("listening_score")
  speakingScore         Float    @default(0) @map("speaking_score")
  vocabularyScore       Float    @default(0) @map("vocabulary_score")
  grammarScore          Float    @default(0) @map("grammar_score")
  
  // Progress
  totalSessions         Int      @default(0) @map("total_sessions")
  totalDuration         Int      @default(0) @map("total_duration")
  scenariosCompleted    Int      @default(0) @map("scenarios_completed")
  vocabularyMastered    Int      @default(0) @map("vocabulary_mastered")
  
  // Streaks
  currentStreak         Int      @default(0) @map("current_streak")
  longestStreak         Int      @default(0) @map("longest_streak")
  lastSessionAt         DateTime? @map("last_session_at")
  
  // Achievements
  achievements          String[]
  
  @@unique([userId, language])
  @@index([tenantId, userId])
  @@map("immersion_progress")
}

// ============================================================================
// ENUMS
// ============================================================================

// Wellbeing enums
enum RiskLevel {
  MINIMAL
  LOW
  MODERATE
  ELEVATED
  HIGH
  CRITICAL
}

enum WellbeingDomain {
  EMOTIONAL
  SOCIAL
  ACADEMIC
  PHYSICAL
  FAMILY
  SAFETY
  PURPOSE
  RESILIENCE
}

enum SignalSource {
  ATTENDANCE
  ASSESSMENT
  GRADEBOOK
  CLASSROOM
  PARENT_PORTAL
  CHECK_IN
  INCIDENT
  COUNSELLOR
  EXTERNAL
  AI_SYNTHESIS
}

enum SignalSeverity {
  INFO
  MINOR
  MODERATE
  SIGNIFICANT
  SEVERE
}

enum SignalStrength {
  WEAK
  MODERATE
  STRONG
  DEFINITIVE
}

enum SignalStatus {
  ACTIVE
  ACKNOWLEDGED
  ADDRESSED
  DISMISSED
  EXPIRED
}

enum CheckInType {
  DAILY_PULSE
  WEEKLY_REFLECTION
  PROMPTED
  COUNSELLOR_SESSION
  INCIDENT_FOLLOW_UP
  RETURN_TO_SCHOOL
  TRANSITION
  SCHEDULED
}

enum TemplateStatus {
  DRAFT
  ACTIVE
  PAUSED
  ARCHIVED
}

enum InterventionType {
  MONITORING
  INFORMAL_CHECK_IN
  FORMAL_CHECK_IN
  PARENT_CONTACT
  PEER_SUPPORT
  COUNSELLOR_REFERRAL
  EXTERNAL_REFERRAL
  SAFETY_PLAN
  BEHAVIOUR_SUPPORT
  ACADEMIC_SUPPORT
  ENVIRONMENTAL_CHANGE
  FAMILY_MEETING
  MULTI_AGENCY
}

enum InterventionStatus {
  RECOMMENDED
  PLANNED
  IN_PROGRESS
  COMPLETED
  EFFECTIVE
  INEFFECTIVE
  ESCALATED
  CANCELLED
}

enum InterventionPriority {
  ROUTINE
  PRIORITY
  URGENT
  EMERGENCY
}

enum IncidentType {
  BEHAVIOUR
  BULLYING
  CYBERBULLYING
  CONFLICT
  DISCLOSURE
  HEALTH_EMERGENCY
  MENTAL_HEALTH
  SELF_HARM
  SUBSTANCE
  FAMILY_CRISIS
  ATTENDANCE_CONCERN
  ACADEMIC_CRISIS
  SAFEGUARDING
  OTHER
}

enum IncidentCategory {
  PHYSICAL
  VERBAL
  SOCIAL
  EMOTIONAL
  DIGITAL
  ENVIRONMENTAL
  RELATIONAL
  ACADEMIC
  HEALTH
}

enum IncidentSeverity {
  MINOR
  MODERATE
  SERIOUS
  CRITICAL
}

enum ConfidentialityLevel {
  STANDARD
  SENSITIVE
  HIGHLY_CONFIDENTIAL
}

enum NotificationType {
  RISK_ALERT
  CHECK_IN_CONCERN
  INTERVENTION_REQUIRED
  ESCALATION
  FOLLOW_UP_DUE
  INCIDENT_REPORTED
}

enum NotificationPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

// Parent Portal enums
enum GuardianRelationship {
  MOTHER
  FATHER
  STEP_MOTHER
  STEP_FATHER
  GUARDIAN
  GRANDPARENT
  FOSTER_CARER
  OTHER
}

enum PortalAccessLevel {
  FULL
  LIMITED
  NONE
}

enum MessagePriority {
  LOW
  NORMAL
  HIGH
  URGENT
}

enum MessageCategory {
  GENERAL
  ACADEMIC
  ATTENDANCE
  BEHAVIOUR
  WELLBEING
  ADMINISTRATIVE
  EMERGENCY
}

enum MeetingType {
  PARENT_TEACHER
  PROGRESS_REVIEW
  WELLBEING
  IEP_REVIEW
  ENROLMENT
  OTHER
}

enum MeetingStatus {
  REQUESTED
  SCHEDULED
  CONFIRMED
  CANCELLED
  COMPLETED
  NO_SHOW
}

enum ConsentType {
  EXCURSION
  MEDICAL
  PHOTO
  DATA_SHARING
  INTERVENTION
  EXTERNAL_REFERRAL
  OTHER
}

enum ConsentStatus {
  PENDING
  GRANTED
  DENIED
  EXPIRED
  WITHDRAWN
}

enum ActionCategory {
  FORM
  PAYMENT
  CONSENT
  MEETING
  DOCUMENT
  OTHER
}

enum ActionPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

enum ActionStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  OVERDUE
  CANCELLED
}

// Governance enums
enum DAOType {
  SCHOOL
  DISTRICT
  REGIONAL
  PLATFORM
  COMMUNITY
}

enum DAOScope {
  CURRICULUM
  POLICY
  BUDGET
  STAFFING
  TECHNOLOGY
  GENERAL
}

enum DAOStatus {
  DRAFT
  ACTIVE
  PAUSED
  DISSOLVED
}

enum DAOMemberRole {
  MEMBER
  DELEGATE
  COUNCIL
  ADMIN
  FOUNDER
}

enum MemberStatus {
  PENDING
  ACTIVE
  SUSPENDED
  LEFT
}

enum ProposalType {
  GOVERNANCE
  TREASURY
  POLICY
  TECHNICAL
  COMMUNITY
  EMERGENCY
}

enum ProposalStatus {
  DRAFT
  SUBMITTED
  DISCUSSION
  VOTING
  PASSED
  REJECTED
  EXECUTED
  VETOED
  CANCELLED
}

enum VoteChoice {
  FOR
  AGAINST
  ABSTAIN
}

enum TransactionType {
  DEPOSIT
  WITHDRAWAL
  GRANT
  REWARD
  FEE
}

enum TransactionStatus {
  PENDING
  APPROVED
  EXECUTED
  REJECTED
}

enum PolicyStatus {
  DRAFT
  ACTIVE
  SUPERSEDED
  ARCHIVED
}

// Token Economy enums
enum TokenTransactionType {
  MINT
  BURN
  TRANSFER
  REWARD
  STAKE
  UNSTAKE
  PURCHASE
  SALE
}

enum StakeStatus {
  ACTIVE
  UNLOCKING
  WITHDRAWN
}

enum NFTType {
  ACHIEVEMENT
  CREDENTIAL
  COLLECTIBLE
  ACCESS_PASS
}

enum AchievementTier {
  BRONZE
  SILVER
  GOLD
  PLATINUM
  DIAMOND
}

// Marketplace enums
enum AppCategory {
  ASSESSMENT
  COMMUNICATION
  ANALYTICS
  CONTENT
  ACCESSIBILITY
  ADMINISTRATION
  INTEGRATION
  OTHER
}

enum AppStatus {
  DRAFT
  IN_REVIEW
  APPROVED
  PUBLISHED
  DEPRECATED
  REMOVED
}

enum PricingModel {
  FREE
  ONE_TIME
  SUBSCRIPTION
  USAGE_BASED
  FREEMIUM
}

enum InstallStatus {
  ACTIVE
  DISABLED
  UNINSTALLED
}

enum ReviewStatus {
  PENDING
  PUBLISHED
  HIDDEN
  REMOVED
}

enum APIKeyStatus {
  ACTIVE
  REVOKED
  EXPIRED
}

enum BountyStatus {
  OPEN
  FUNDED
  CLAIMED
  IN_PROGRESS
  COMPLETED
  DISPUTED
  CANCELLED
}

// Immersion enums
enum EnvironmentType {
  SOCIAL
  TRAVEL
  BUSINESS
  ACADEMIC
  EVERYDAY
  CULTURAL
}

enum EnvironmentStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum SessionType {
  SOLO
  GUIDED
  COLLABORATIVE
  ASSESSMENT
}

enum PlatformType {
  WEB_2D
  WEB_3D
  MOBILE_AR
  VR_STANDALONE
  VR_TETHERED
  WEBXR
}
